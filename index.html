<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Simpanan</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    body {
      margin: 0; padding: 0;
      background: #0f0f0f; color: #fff;
      display: flex; justify-content: center; align-items: center;
      height: 100vh;
      flex-direction: column;
    }
    .container {
      width: 90%; max-width: 500px;
      background: #1c1c1c;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(255,255,255,0.1);
    }
    h2 { margin-bottom: 1rem; text-align: center; }
    input, button, textarea {
      width: 100%; padding: 0.75rem;
      margin: 0.5rem 0;
      border: none; border-radius: 12px;
      background: #2d2d2d; color: white;
      font-size: 1rem;
    }
    button {
      background: #ffffff; color: black;
      font-weight: bold; cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #00ffe0;
      transform: scale(1.02);
    }
    .dashboard {
      display: none;
      flex-direction: column;
      gap: 1rem;
    }
    .file-display {
      white-space: pre-wrap;
      background: #292929;
      padding: 1rem;
      border-radius: 10px;
      margin-top: 0.5rem;
      color: #d2ffd2;
    }
    .admin-panel {
      background: #111;
      padding: 1rem;
      border-radius: 10px;
      margin-top: 2rem;
    }
    .button-wrapper {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

  <div class="container" id="login-page">
    <h2>Login User</h2>
    <input type="text" id="username" placeholder="Masukkan Username" />
    <button onclick="loginUser()">Masuk</button>
  </div>

  <div class="container dashboard" id="dashboard">
    <h2>Selamat datang, <span id="user-greet"></span> ðŸ‘‹</h2>
    
    <div class="button-wrapper" id="button-list">
      <!-- Tombol simpanan akan muncul di sini -->
    </div>

    <div class="file-display" id="file-content" style="display:none;"></div>

    <div class="admin-panel">
      <h3>Login Admin</h3>
      <input type="password" id="admin-pass" placeholder="Password Admin"/>
      <button onclick="adminLogin()">Login Admin</button>

      <div id="admin-controls" style="display:none;">
        <h4>Tambah/Edit Simpanan</h4>
        <input type="text" id="new-button-name" placeholder="Nama Button"/>
        <textarea id="new-file-content" placeholder="Isi Simpanan (teks)"></textarea>
        <button onclick="addNewSimpanan()">Simpan / Tambahkan</button>
      </div>
    </div>
  </div>

  <script>
    const defaultButtons = [
      { name: "Simpanan A", content: "Isi Simpanan A dari Owner" },
      { name: "Simpanan B", content: "Isi Simpanan B dari Owner" },
      { name: "Simpanan C", content: "Isi Simpanan C dari Owner" }
    ];

    const adminPassword = "admin123"; // Ganti password admin di sini

    function loginUser() {
      const uname = document.getElementById("username").value.trim();
      if (!uname) return alert("Masukkan Username!");
      localStorage.setItem("username", uname);
      showDashboard();
    }

    function showDashboard() {
      document.getElementById("login-page").style.display = "none";
      document.getElementById("dashboard").style.display = "flex";
      document.getElementById("user-greet").textContent = localStorage.getItem("username");

      let buttons = JSON.parse(localStorage.getItem("simpananButtons")) || defaultButtons;
      const btnList = document.getElementById("button-list");
      btnList.innerHTML = "";

      buttons.forEach((btn, index) => {
        const b = document.createElement("button");
        b.textContent = btn.name;
        b.onclick = () => showFile(btn.content);
        btnList.appendChild(b);
      });
    }

    function showFile(content) {
      const box = document.getElementById("file-content");
      box.style.display = "block";
      box.textContent = content;
    }

    function adminLogin() {
      const inputPass = document.getElementById("admin-pass").value;
      if (inputPass === adminPassword) {
        document.getElementById("admin-controls").style.display = "block";
        alert("Admin berhasil login!");
      } else {
        alert("Password salah!");
      }
    }

    function addNewSimpanan() {
      const name = document.getElementById("new-button-name").value.trim();
      const content = document.getElementById("new-file-content").value.trim();
      if (!name || !content) return alert("Isi semua field!");

      let buttons = JSON.parse(localStorage.getItem("simpananButtons")) || defaultButtons;
      const existing = buttons.find(b => b.name === name);
      if (existing) {
        existing.content = content; // update
      } else {
        buttons.push({ name, content });
      }
      localStorage.setItem("simpananButtons", JSON.stringify(buttons));
      alert("Simpanan disimpan!");
      showDashboard(); // refresh tampilan
    }

    // Auto-login jika sudah simpan username
    window.onload = () => {
      if (localStorage.getItem("username")) showDashboard();
    };
  </script>

</body>
</html>
